## Post-Process Information
# bag_name: "/home/mmmfarrell/magicc/roscopter_ws/src/bags/groot_sensors_stationary.bag"
# bag_name: "/home/mmmfarrell/magicc/roscopter_ws/src/bags/groot_sensors_triangle.bag"
# bag_name: "/home/mmmfarrell/magicc/roscopter_ws/src/bags/rock_canyon_walkpath.bag"
bag_name: "/home/mmmfarrell/magicc/roscopter_ws/src/bags/rock_canyon_north_eastfirst.bag"
bag_name: "/home/mmmfarrell/magicc/roscopter_ws/src/bags/rock_canyon_parkinglot_south_eastfirst.bag"
# bag_name: "/home/mmmfarrell/magicc/roscopter_ws/src/bags/rock_canyon_updown.bag"
status_topic: "/status"
imu_topic: "/imu/data"
baro_topic: "/serial/baro"
range_topic: ""
pose_topic: ""
odom_topic: "/ins/ins"
gnss_topic: ""
ublox_gnss_topic: ""
inertial_sense_gnss_topic: "/ins/gps"

start_time: 0
duration: 186

## Is_flying checks
enable_arm_check: true # require armed before checking for is_flying
is_flying_threshold: 10.5 # if accel measurement exceed this magnitude, set is_flying

## Logging
log_prefix: "/tmp/roscopter/ekf/"
enable_log: true

## Measurement Processing
enable_partial_update: true
enable_out_of_order: false
use_truth: false # Whether or not to use mocap measurements
use_gnss: true
use_baro: true
use_range: false
use_zero_vel: true

R_zero_vel: [0.001, 0.001, 0.001, # vel
              0.001] # Altitude

## Initial Uncertainty
P0: [10., 10.0, 10.0, # pos
     0.01, 0.01, 0.01, # att
     0.001, 0.001, 0.001, # vel
     0.3, 0.3, 0.3, # accel bias
     0.1, 0.1, 0.1, # gyro bias
     9.0,           # baro bias
     100.0] # reference altitude

## Additive Process Noise
Qx: [0.000, 0.000, 0.000,       # pos
     0.000, 0.000, 0.000,       # att
     0.00001, 0.00001, 0.00001,       # vel
     0.001, 0.001, 0.001,       # accel bias
     0.0001, 0.0001, 0.0001,    # gyro bias
     0.0001,                    # baro bias
     1.0]                       # reference altitude

## Lambda (Partial Update)
lambda: [1.0, 1.0, 1.0,       # pos
         1.0, 1.0, 1.0,       # att
         1.0, 1.0, 1.0,       # vel
         0.25, 0.25, 0.25,    # accel bias
         0.25, 0.25, 0.25,    # gyro bias
         0.3,                 # baro bias
         0.3]                 # reference altitude

# Constant Parameeters
p_b2g: [0, 0, 0] # position from body frame to gps frame

# Initial State
manual_ref_lla: false # Use manual ref_lla or use first lla from gps
ref_lla: [40.24632, -111.646882, 1415.0]
ref_heading: 0.0 # reference heading for inertial frame (from north)

x0: [0, 0, 0,       # pos
     1, 0, 0, 0]    # att

## Sensor Noise
accel_noise_stdev: 0.5
gyro_noise_stdev: 0.02
position_noise_stdev: 0.01
attitude_noise_stdev: 0.01
baro_pressure_noise_stdev: 5.0
range_noise_stdev: 0.05
